<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blogging</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="navbar bg-light">
      <div class="container">
        <a class="navbar-brand" href="#">
          <img
            src="https://seeklogo.com/images/M/medium-logo-F0ACFCCD58-seeklogo.com.png"
            alt=""
            height="50"
          />
          <h2>Blogger</h2>
        </a>
        <ul class="nav justify-content-end">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="#blogsContainer"
              >Explore</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#makepost">Post</a>
          </li>
        </ul>
      </div>
    </nav>
    <div
      class="container d-flex justify-content-around flex-wrap"
      id="blogsContainer"
    >
      <div class="card m-5" style="width: 18rem">
        <img
          src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
        </div>
      </div>
      <div class="card m-5" style="width: 18rem">
        <img
          src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
        </div>
      </div>
      <div class="card m-5" style="width: 18rem">
        <img
          src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
        </div>
      </div>
      <div class="card m-5" style="width: 18rem">
        <img
          src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
        </div>
      </div>
      <div class="card m-5" style="width: 18rem">
        <img
          src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
        </div>
      </div>
      <div class="card m-5" style="width: 18rem">
        <img
          src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
          class="card-img-top"
          alt="..."
        />
        <div class="card-body">
          <h5 class="card-title">Card title</h5>
          <p class="card-text">
            Some quick example text to build on the card title and make up the
            bulk of the card's content.
          </p>
        </div>
      </div>
    </div>
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center" id="paginationContainer">
        <li class="page-item">
          <a class="page-link" style="cursor: pointer" onclick="fuck()">1</a>
        </li>
      </ul>
    </nav>
    <div class="container" id="makepost">
      <h1 class="text-center">Make a post</h1>
      <div style="width: 60%; margin: auto" class="mb-3">
        <div class="mb-3">
          <label for="title" class="form-label">Title</label>
          <input
            type="text"
            class="form-control"
            id="postTitle"
            aria-describedby="titleHelp"
          />
          <div id="titleHelp" class="form-text">Enter a title</div>
        </div>
        <div class="mb-3">
          <label for="body" class="form-label">Content</label>
          <input type="text" class="form-control" id="postBody" />
        </div>
        <button type="submit" class="btn btn-primary" onclick="makePost()">
          Submit
        </button>
      </div>
    </div>
    <div
      class="container-fluid d-flex justify-content-center align-items-center bg-dark"
      id="footer"
      style="height: 100px"
    >
      <div>
        <p style="color: white">Build by Sushant Mishra</p>
      </div>
    </div>
    <!-- <script src="./index.js" /> -->
    <script>
      const blogsContainer = document.getElementById("blogsContainer");

      let blogs = [];
      let start = 0,
        end = 8;

      function createBlogCard(title, content) {
        const ele = `<div class="card m-3" style="width: 18rem">
    <img
      src="https://miro.medium.com/max/1838/1*jfdwtvU6V6g99q3G7gq7dQ.png"
      class="card-img-top"
      alt="..."
    />
    <div class="card-body">
      <h5 class="card-title">${title}</h5>
      <p class="card-text">
        ${content}
      </p>
    </div>
  </div>`;

        return ele;
      }

      function fetchBlogs() {
        const xhr = new XMLHttpRequest();

        const api = `https://jsonplaceholder.typicode.com/posts?utm_source=Mailerlite&utm_medium=E-mail&utm_campaign=Test%20Series&utm_term=2022-08-09`;

        xhr.onreadystatechange = () => {
          if (xhr.readyState == 4 && xhr.status == 200) {
            const res = JSON.parse(xhr.responseText);
            blogs = res;

            console.log(blogs);

            blogsContainer.innerHTML = null;

            for (let i = 0; i < 8; i++) {
              blogsContainer.innerHTML += createBlogCard(
                blogs[i].title,
                blogs[i].body
              );
            }

            createPagination();
          }
        };

        xhr.open("GET", api);
        xhr.send();
      }

      fetchBlogs();

      function createPagination() {
        const paginationContainer = document.getElementById(
          "paginationContainer"
        );
        paginationContainer.innerHTML = null;
        let pageNo = 1;
        for (let i = 0; i < blogs.length; i += 8) {
          paginationContainer.innerHTML += `<li class="page-item">
        <a class="page-link" style="cursor: pointer" onClick="changePage(${pageNo})">${pageNo}</a>
      </li>`;
          pageNo++;
        }
      }

      function changePage(pageNo) {
        blogsContainer.innerHTML = null;

        for (
          let i = 8 * (pageNo - 1);
          i < Math.min(8 * pageNo, blogs.length);
          i++
        ) {
          blogsContainer.innerHTML += createBlogCard(
            blogs[i].title,
            blogs[i].body
          );
        }
      }

      function makePost() {
        const title = document.getElementById("postTitle").value;
        const body = document.getElementById("postBody").value;

        if (title == "" || body == "") return;

        blogs = [
          {
            title: title,
            body: body,
          },
          ...blogs,
        ];

        changePage(1);
        document.getElementById("postTitle").value = "";
        document.getElementById("postBody").value = "";

        blogsContainer.scrollIntoView({ behavior: "smooth" });
      }
    </script>
  </body>
</html>
